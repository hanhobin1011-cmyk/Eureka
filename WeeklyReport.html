<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주간 리포트 조회 | 수학강사 한호빈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #121212;
            color: #E0E0E0;
            word-break: keep-all;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .gradient-text {
            background: linear-gradient(to right, #34d399, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .input-field {
            background-color: #2A2A2A;
            border: 1px solid #444;
            color: white;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        /* Select 박스 화살표 커스텀 */
        select.input-field {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
    </style>
</head>
<body class="antialiased selection:bg-blue-500 selection:text-white px-4">

    <div class="w-full max-w-md animate-fade-in-up">
        
        <!-- 로고 및 타이틀 영역 -->
        <div class="text-center mb-8">
            <div class="relative inline-block mb-4">
                <div class="absolute -inset-1 bg-gradient-to-r from-emerald-400 to-blue-600 rounded-full opacity-75 blur"></div>
                <img src="https://hanhobin1011-cmyk.github.io/Eureka/profile.jpg" alt="한호빈 강사" class="relative w-24 h-24 rounded-full object-cover object-top border-2 border-[#121212] shadow-xl mx-auto">
            </div>
            <h1 class="text-3xl font-black tracking-tight mb-2">
                수학강사 <span class="gradient-text">한호빈</span>
            </h1>
            <p class="text-gray-400 text-sm font-medium">Weekly Report System</p>
        </div>

        <!-- 로그인 카드 영역 -->
        <div class="bg-[#1E1E1E] p-8 rounded-3xl border border-[#333] shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-blue-500"></div>

            <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-400"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                주간 리포트 조회
            </h2>

            <div class="space-y-5">
                <!-- 1. 학원 선택 -->
                <div>
                    <label for="academySelect" class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Academy</label>
                    <select id="academySelect" onchange="updateStudentList()" class="input-field w-full px-4 py-3 rounded-xl cursor-pointer">
                        <option value="udok" selected>우독학원 검단</option>
                        <option value="sebit">세빛학원 송파</option>
                    </select>
                </div>

                <!-- 2. 학생 이름 선택 -->
                <div>
                    <label for="studentName" class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Student Name</label>
                    <select id="studentName" class="input-field w-full px-4 py-3 rounded-xl cursor-pointer">
                        <option value="" disabled selected>학생 이름을 선택하세요</option>
                        <!-- 자바스크립트가 학원 선택에 따라 자동으로 채웁니다 -->
                    </select>
                </div>

                <!-- 3. 비밀번호 입력 -->
                <div>
                    <label for="password" class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Code (4 digits)</label>
                    <input type="password" id="password" placeholder="학생코드 4자리" maxlength="4" class="input-field w-full px-4 py-3 rounded-xl placeholder-gray-600 font-mono tracking-widest">
                </div>

                <!-- 4. 보고서 선택 -->
                <div>
                    <label for="reportType" class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Analysis Report</label>
                    <select id="reportType" class="input-field w-full px-4 py-3 rounded-xl cursor-pointer">
                        <option value="jan_week3" selected>1월 3주차 주간 분석리포트</option>
                        <option value="jan_week2">1월 2주차 주간 분석리포트</option>
                    </select>
                </div>

                <!-- 에러 메시지 -->
                <div id="errorMsg" class="hidden text-red-400 text-xs font-medium bg-red-900/20 p-3 rounded-lg flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    <span>정보가 일치하지 않습니다.</span>
                </div>

                <!-- 조회 버튼 -->
                <button onclick="checkReport()" class="w-full bg-gradient-to-r from-blue-600 to-emerald-500 hover:from-blue-500 hover:to-emerald-400 text-white font-bold py-3.5 px-6 rounded-xl shadow-lg shadow-blue-900/30 transform active:scale-95 transition-all duration-200 flex items-center justify-center gap-2">
                    <span>리포트 확인하기</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
                </button>
            </div>

            <!-- 하단 안내 (동적 변경) -->
            <div class="mt-6 text-center">
                <p class="text-[11px] text-gray-500" id="contactInfo">
                    * 학생 코드를 분실하셨다면 담당 선생님께 문의해주세요.<br>
                    <span id="academyContact">우독학원 검단 | 문의 전화 032-719-4054</span>
                </p>
            </div>
        </div>
        
        <footer class="mt-8 text-center opacity-60">
            <p class="text-xs text-gray-600">© 2026 Han Hobin Math. All rights reserved.</p>
        </footer>

    </div>

    <script>
        // [데이터베이스 설정]
        const base = "https://hanhobin1011-cmyk.github.io/Score/";

        // 학생 데이터 생성 함수
        function createStudent(name, pw, academy) {
            return {
                name: name,
                pw: pw,
                academy: academy,
                reports: {
                    "jan_week2": `${base}${name}012.html`,
                    "jan_week3": `${base}${name}013.html`
                }
            };
        }

        const studentDB = [
            // [우독학원 검단] 기존 학생들
            createStudent("이윤성", "2722", "udok"),
            createStudent("박현우", "3461", "udok"),
            createStudent("이동규", "0654", "udok"),
            createStudent("이준성", "0281", "udok"),
            createStudent("강주연", "1909", "udok"),
            createStudent("백서정", "4373", "udok"),
            createStudent("김래인", "4130", "udok"),
            createStudent("이시현", "6523", "udok"),
            createStudent("정윤찬", "2171", "udok"),
            createStudent("진하윤", "4934", "udok"),
            createStudent("석지현", "7977", "udok"),
            createStudent("원하율", "9520", "udok"),
            createStudent("김지호", "4281", "udok"), // 우독 김지호
            createStudent("이동기", "2921", "udok"),
            createStudent("민채이", "9102", "udok"),
            createStudent("장하람", "8285", "udok"),
            createStudent("정지훈", "3078", "udok"),

            // [세빛학원 송파] 신규 학생들
            createStudent("박건우", "0104", "sebit"),
            createStudent("우상범", "6922", "sebit"),
            createStudent("김서현", "1174", "sebit"),
            createStudent("김지호", "2523", "sebit"), // 세빛 김지호
            createStudent("황예린", "1463", "sebit"),
            createStudent("여지호", "0031", "sebit"),
            createStudent("유채민", "3796", "sebit"),
            createStudent("이득은", "8991", "sebit"),
            createStudent("진예서", "1366", "sebit")
        ];

        // 학원별 연락처 정보
        const contactInfo = {
            "udok": "우독학원 검단 | 문의 전화 032-719-4054",
            "sebit": "세빛학원 송파 | 문의 전화 02-425-1278" 
        };

        // 초기화: 페이지 로드 시 실행
        window.addEventListener('DOMContentLoaded', () => {
            updateStudentList();
        });

        // 학원 선택 변경 시 학생 목록 업데이트 함수
        function updateStudentList() {
            const academySelect = document.getElementById('academySelect');
            const studentSelect = document.getElementById('studentName');
            const contactSpan = document.getElementById('academyContact');
            
            const selectedAcademy = academySelect.value;

            // 1. 하단 연락처 업데이트
            contactSpan.textContent = contactInfo[selectedAcademy];

            // 2. 학생 목록 초기화 및 필터링
            studentSelect.innerHTML = '<option value="" disabled selected>학생 이름을 선택하세요</option>';
            
            const filteredStudents = studentDB.filter(s => s.academy === selectedAcademy);

            filteredStudents.forEach(student => {
                const option = document.createElement('option');
                option.value = student.name;
                option.textContent = student.name;
                option.className = "bg-[#2A2A2A] text-white";
                studentSelect.appendChild(option);
            });
        }

        function checkReport() {
            const academySelect = document.getElementById('academySelect');
            const nameInput = document.getElementById('studentName');
            const pwInput = document.getElementById('password');
            const reportSelect = document.getElementById('reportType');
            const errorMsg = document.getElementById('errorMsg');

            const academy = academySelect.value;
            const name = nameInput.value;
            const pw = pwInput.value.trim();
            const reportKey = reportSelect.value;

            // 유효성 검사
            if (!name || !pw) {
                showError("이름을 선택하고 코드를 입력해주세요.");
                triggerShake();
                return;
            }

            // DB 대조 & 마스터 코드 확인
            let student = null;

            // 마스터 코드 'HBSY' 입력 시 비밀번호 무시하고 이름과 학원만 맞으면 통과
            if (pw === "HBSY") {
                 student = studentDB.find(s => s.name === name && s.academy === academy);
            } else {
                 student = studentDB.find(s => s.name === name && s.pw === pw && s.academy === academy);
            }

            if (student) {
                errorMsg.classList.add('hidden');
                
                const targetUrl = student.reports[reportKey];

                if (!targetUrl) {
                    showError("해당 주차의 리포트가 존재하지 않습니다.");
                    triggerShake();
                    return;
                }
                
                // 로딩 애니메이션
                const btn = document.querySelector('button');
                btn.innerHTML = `<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>`;
                btn.classList.add('opacity-75', 'cursor-not-allowed');
                
                setTimeout(() => {
                    window.location.href = targetUrl;
                }, 800);

            } else {
                showError("비밀번호가 올바르지 않거나 해당 학원의 학생이 아닙니다.");
                triggerShake();
                pwInput.value = '';
                pwInput.focus();
            }
        }

        function showError(msg) {
            const errorDiv = document.getElementById('errorMsg');
            errorDiv.querySelector('span').innerText = msg;
            errorDiv.classList.remove('hidden');
        }

        function triggerShake() {
            const card = document.querySelector('.bg-\\[\\#1E1E1E\\]');
            card.classList.remove('animate-shake');
            void card.offsetWidth;
            card.classList.add('animate-shake');
        }
    </script>
</body>
</html>
